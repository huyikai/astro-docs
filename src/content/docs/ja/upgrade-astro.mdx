---
title: Astroのアップグレード
description: Astroのアップグレード方法を学ぶ
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import Version from '~/components/Version.astro';


このガイドでは、Astroや関連する依存関係のバージョンを更新する方法、バージョン間で何が変更されたかを調べる方法、そしてAstroのバージョニングシステムとそれに対応するドキュメントの更新を理解する方法について説明します。
## 変更点は何ですか？
Astroの最新リリースは<Version pkgName="astro" />です。

すべての変更の詳細なリストは[Astroの変更履歴](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md)で確認できます。また、各[メジャーバージョン](#主要な変更点)へのアップグレードに関する重要な説明は、[アップグレードガイド](#アップグレードガイド)に記載されています。


## 最新バージョンへのアップグレード

パッケージマネージャーを使用して、一つのコマンドでプロジェクトのAstroとすべての公式統合を最新バージョンに更新します：

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # Astroと公式統合を一緒にアップグレード
  npx @astrojs/upgrade
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # Astroと公式統合を一緒にアップグレード
  pnpm dlx @astrojs/upgrade
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # Astroと公式統合を一緒にアップグレード
  yarn dlx @astrojs/upgrade
  ```
  </Fragment>
</PackageManagerTabs>


### 手動でのアップグレード

Astroと統合を手動で現在のバージョンに更新するには、パッケージマネージャーに適したコマンドを使用してください。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # 例：ReactとTailwindの統合を含むAstroをアップグレード
  npm install astro@latest @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # 例：ReactとTailwindの統合を含むAstroをアップグレード
  pnpm add astro@latest @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # 例：ReactとTailwindの統合を含むAstroをアップグレード
  yarn add astro@latest @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
</PackageManagerTabs>

### 特定のバージョン番号をインストールする

特定の[Astroのバージョン](https://www.npmjs.com/package/astro?activeTab=versions)や統合をインストールするには、パッケージマネージャーに適したコマンドを使用してください。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npm install astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm add astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn add astro@4.5.3 @astrojs/react@3.0.10
  ```
  </Fragment>
</PackageManagerTabs>


## ドキュメントの更新

このドキュメントは、[マイナーリリース](#マイナーチェンジ)および[メジャーバージョンリリース](#主要な変更点)ごとに更新されます。新機能が追加されたり、既存の使用方法が変更されたりすると、ドキュメントは**現在のAstroの挙動**を反映するように更新されます。プロジェクトが更新されていない場合、最新のドキュメントと一部の挙動が一致しないことに気づくかもしれません。

新機能は、それらが追加された特定のバージョン番号と共にドキュメントに追加されます。これは、Astroの最新リリースに更新していない場合、ドキュメント化された一部の機能が利用できないことを意味します。新機能を使用する前に、常に`Added in:`のバージョン番号を確認し、プロジェクトが更新されていることを確認してください！

Astroの最新メジャーバージョンにアップグレードしていない場合、Astroのドキュメントとプロジェクトの挙動の間に大きな違いが生じる可能性があります。できるだけ早く現在のメジャーバージョンのAstroにアップグレードすることを強くお勧めします。以前のバージョンのコードとドキュメントはサポートされていません。

### アップグレードガイド

各[メジャーバージョンリリース](#主要な変更点)の後には、重要な変更点とプロジェクトコードをアップグレードするための指示が記載された**アップグレードガイド**が用意されています。

Astroの主要なドキュメントページは常に**最新リリースバージョンのAstroに対して正確**です。これらは以前のバージョンでの動作方法を説明したり比較したりするものではなく、更新されたり変更されたりした挙動を強調するものでもありません。

以下のアップグレードガイドでは、新旧のバージョンを比較して変更点を説明しています。アップグレードガイドには、コードの変更を必要とする可能性のあるすべての内容が含まれています：破壊的変更、非推奨化、機能の削除や置換、および使用方法の更新ガイド。Astroへの各変更には、「何をすべきか？」セクションが含まれており、プロジェクトコードを成功裏に更新するための助けとなります。

- [v4へのアップグレード](/ja/guides/upgrade-to/v4/)
- [v3へのアップグレード](/ja/guides/upgrade-to/v3/)
- [v2へのアップグレード](/ja/guides/upgrade-to/v2/)
- [v1へのアップグレード](/ja/guides/upgrade-to/v1/)

### 古いドキュメント（メンテナンスされていません）

古いバージョンのAstroのドキュメントはメンテナンスされていませんが、静的スナップショットとして利用可能です。プロジェクトをアップグレードできない場合でも、ガイドや参照資料を参照したい場合は、これらのバージョンのドキュメントを使用してください：

- [メンテナンスされていないv3.6.3のスナップショット](https://docs-git-v3-docs-unmaintained-astrodotbuild.vercel.app/)
- [メンテナンスされていないv2.10.15のスナップショット](https://deploy-preview-4405--astro-docs-2.netlify.app/en/getting-started/)

## セマンティック バージョニング

Astroはできるだけ[セマンティック バージョニング](https://semver.org/)に従うよう努力しています。これは、開発者がリリースにバージョン番号を割り当てる方法を決定するために使用する一連のルールです。セマンティック バージョニングは、次のバージョンからどのような変更が期待できるかをユーザーに知らせるための予測可能なパターンに従います。

セマンティック バージョニングでは、ソフトウェアのバージョン番号に`X.Y.Z`のパターンを強制します。これらの値は、**メジャー (X)**、**マイナー (Y)**、および**パッチ (Z)** アップデートを表します。

### パッチ変更

パッチ変更は最も影響の少ない変更です。これらはAstroの使用方法を変えず、更新時に自分のコードを変更する必要はありません。

Astroが「パッチ」バージョンを発行すると、最後の数字が増加します。（例：`astro@4.3.14` -> `astro@4.3.15`）

パッチは、以下のような理由でリリースされることがあります：

- Astroの機能を変えない内部変更：
  - リファクタリング
  - パフォーマンスの向上
  - テストカバレッジの増加や変更
  - 宣言されたドキュメントと期待される挙動の整合
- ログとエラーメッセージの改善。
- 失敗したリリースの再リリース。

パッチ変更には**ほとんどのバグ修正**も含まれます。これには、ユーザーが意図しないまたは望ましくない挙動を利用していた場合でも含まれます。


### マイナーチェンジ

マイナーリリースは、主に新機能や改善点を導入するもので、コードの変更を必要としません。ただし、既存の機能が**非推奨**（将来のバージョンで削除される予定であるが、機能は継続）とマークされ、その最終的な削除に備える機会を提供することもあります。

マイナーリリースには、以下のような変更が含まれます：

- 既存の機能/オプションの**非推奨**で、今後のメジャーリリースで削除されると警告されます。
- 新機能の導入。
- 統合フックにおける新オプションの導入。
- `astro/app`における新機能の導入、特に新しいアダプターの作成に使用されます。

マイナーリリースには、同時に小さなパッチ変更も含まれる場合があります。

### 主要な変更点

主要リリースには、少なくとも一部の既存コードに影響を与える破壊的変更が含まれます。これらの破壊的変更は常にAstroの["vXへのアップグレード"ガイド](#アップグレードガイド)に文書化されています。

主要リリースにより、Astroは内部ロジックだけでなく、意図された挙動や使用法にも大きな変更を加えることができます。ドキュメントは最新バージョンのみを反映するよう更新され、**静的でメンテナンスされていない古いドキュメントのスナップショット**は、まだアップグレードされていない古いプロジェクトのための歴史的記録として利用可能です。

主要リリースには、以下のような変更が含まれます：

- 以前に非推奨とされた機能の削除。
- 既存機能の変更。
- 統合フック内の既存オプションの変更。
- `astro/app`内の既存オプションおよび機能の変更、特に新しいアダプターの作成に使用されます。

主要リリースには、通常、マイナーリリースやパッチリリースで個別にリリースされる非破壊的変更や改善も含まれる場合があります。

### 例外

- **実験的機能**。セマンティック バージョニングに従わずにAstroのバージョンをリリースすることで、Astroの開発者は実験的機能の開発中に最大限の柔軟性を持ち、根本的な方向転換さえも可能になります。そのため、これらの機能の挙動はマイナー変更やパッチ変更で壊れる可能性があります。

  これらの機能は通常、進行中の公開[検討要求（RFC）ステージ3](https://github.com/withastro/roadmap#stage-3-rfc--development)に伴います。ベータユーザーがアップデートをフォローし、議論に早期フィードバックを残して、これらの機能の開発を支援することが期待されています。

  これらの機能が実験期間を終えると、通常のセマンティック バージョニング契約に従います。

- **ドキュメントの改善**（例：参照とエラーメッセージ）。これらは`docs`リポジトリのソースから構築されます。これにより、ドキュメントソースコンテンツがメインの`astro`リポジトリに格納されている場合、Astroはドキュメントの修正と改善を迅速に更新できます。
